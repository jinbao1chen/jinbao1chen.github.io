---
layout: post
title: "Qt工具QAQ"
date: 2022-02-01
description: "C++开发Gui工具"
tag: 工具，Qt
---

## Note
使用qt遇到的一些问题记录。

## QAQ
### 1、使用Qt 5.14.0自带的windeployqt打包程序提示Unable to find Platform Plugin的解决方法
```
C:\Qt\Qt5.14.0\5.14.0\mingw73_64>cd /d D:\QT_packtest

D:\QT_packtest>
D:\QT_packtest>
D:\QT_packtest>windeployqt TCPClient.exe
D:\QT_packtest\TCPClient.exe 64 bit, release executable
Direct dependencies: Qt5Core Qt5Gui Qt5Network Qt5Widgets
All dependencies   : Qt5Core Qt5Gui Qt5Network Qt5Widgets
To be deployed     : Qt5Core Qt5Gui Qt5Network Qt5Widgets
Unable to find the platform plugin.
```
问题原因：Qt5.14.0版本太新，windeployqt不支持。
windeployqt does not work for MinGW QTBUG-80763 Will be fixed in 5.14.1

解决方法：回滚至5.13.2，等待Qt官方更新5.14.1。
参考链接：https://blog.csdn.net/jtjljy/article/details/103829487

### 2、Qt自带的windeployqt打包程序
参考文档：https://www.jb51.net/article/229479.htm
如果链接不存在，参考文档链接：https://pan.baidu.com/s/1mka-1EBYlueO2ulYTlBG0Q 
提取码：d7j4

（1）通过release方式构建项目。构建套件中选择release选项后，重新run一遍项目；即可在原项目目录下找到构建项目的文件夹，进入release文件夹就可以看到exe文件，这个就是代码打包出来的文件，但是缺少QT对应的依赖，所以无法执行。将其单独放在一个文件夹下面，并复制此路径。

（2）使用windeployqt工具添加依赖项。在任务管理器找到Qt命令行工具，直接搜索即可，注意要使用MinGW版本才能添加合适的依赖，也要注意bit位数，64位的项目不能用32位的MinGW来打包，这里项目和打包用的都是32位，因为32位的电脑多一些，所以兼容性会好一些（64位电脑能运行32位软件，32位软件不能运行64位电脑）
分别在此命令行工具下执行以下两条指令：
```
进入待操作文件夹 cd+刚刚复制的路径

cd D:\Code\QT\test

使用windeployqt工具

windeployqt Demo.exe
```
构建完成的exe文件能在这个文件夹下面运行，但是脱离此文件夹依旧不能独立运行，所以后面使用Enigma Virtual Box打包。

（3）使用Enigma Virtual Box打包。Enigma Virtual Box是软件虚拟化工具，它可以将多个文件封装到应用程序主文件，从而制作成为单执行文件的绿色软件。它支持所有类型的文件格式，虚拟化后的软件不释放任何临时文件到您的硬盘，文件模拟过程仅在内存运行

Enigma Virtual Box下载路径： https://enigmaprotector.com/assets/files/enigmavb.exe 直接点击即可下载

选择好输入输出路径，将需要打包的对应文件拖入打包区，点击process即可打包。这时候打包出来的Demo_boxed.exe文件就是可以独立运行和发布的exe文件了。
